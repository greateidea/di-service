{"remainingRequest":"/Users/a18011405704/Desktop/code/di-service/node_modules/thread-loader/dist/cjs.js??ref--11-1!/Users/a18011405704/Desktop/code/di-service/node_modules/babel-loader/lib/index.js??ref--11-2!/Users/a18011405704/Desktop/code/di-service/node_modules/source-map-loader/index.js!/Users/a18011405704/Desktop/code/di-service/src/di/decorate/service.ts","dependencies":[{"path":"/Users/a18011405704/Desktop/code/di-service/src/di/decorate/service.ts","mtime":1605096657709},{"path":"/Users/a18011405704/Desktop/code/di-service/node_modules/cache-loader/dist/cjs.js","mtime":1605078470464},{"path":"/Users/a18011405704/Desktop/code/di-service/node_modules/thread-loader/dist/cjs.js","mtime":1605078476739},{"path":"/Users/a18011405704/Desktop/code/di-service/node_modules/babel-loader/lib/index.js","mtime":1605078442188},{"path":"/Users/a18011405704/Desktop/code/di-service/node_modules/source-map-loader/index.js","mtime":1605078476388}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvYTE4MDExNDA1NzA0L0Rlc2t0b3AvY29kZS9kaS1zZXJ2aWNlL25vZGVfbW9kdWxlcy9kb2N6LWNvcmUvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvYTE4MDExNDA1NzA0L0Rlc2t0b3AvY29kZS9kaS1zZXJ2aWNlL25vZGVfbW9kdWxlcy9kb2N6LWNvcmUvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQgZnJvbSAiL1VzZXJzL2ExODAxMTQwNTcwNC9EZXNrdG9wL2NvZGUvZGktc2VydmljZS9ub2RlX21vZHVsZXMvZG9jei1jb3JlL25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9Vc2Vycy9hMTgwMTE0MDU3MDQvRGVza3RvcC9jb2RlL2RpLXNlcnZpY2Uvbm9kZV9tb2R1bGVzL2RvY3otY29yZS9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9Vc2Vycy9hMTgwMTE0MDU3MDQvRGVza3RvcC9jb2RlL2RpLXNlcnZpY2Uvbm9kZV9tb2R1bGVzL2RvY3otY29yZS9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIiOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZW50ZXJNb2R1bGUgOiB1bmRlZmluZWQ7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCnZhciBfX3NpZ25hdHVyZV9fID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmRlZmF1bHQuc2lnbmF0dXJlIDogZnVuY3Rpb24gKGEpIHsKICByZXR1cm4gYTsKfTsKCmltcG9ydCB7IGdldERlcGVuZGVuY2llc0ludGFuY2VzIH0gZnJvbSAnLi4vaW5kZXgnOwovLyDpl67popjvvJpyZWFjdOexu+mHjOeahOaehOmAoOWZqOWPguaVsOS4reeahHByb3Bz5ZKM57G76YeM5YW25LuW5Zyw5pa555qEdGhpcy5wcm9wc+aYr+S4jeaYr+S4gOagt+eahO+8jOWmguaenOS4jeS4gOagt++8jOmCo+S4uuS7gOS5iOS4jeS4gOagt++8n++8n++8nwpleHBvcnQgZnVuY3Rpb24gU2VydmljZShzZXJ2aWNlc0lkKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChjb3RyKSB7CiAgICB2YXIgUHJveHlDbGFzc1dpdGhTZXZpY2llcyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX2NvdHIpIHsKICAgICAgX2luaGVyaXRzKFByb3h5Q2xhc3NXaXRoU2V2aWNpZXMsIF9jb3RyKTsKCiAgICAgIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoUHJveHlDbGFzc1dpdGhTZXZpY2llcyk7CgogICAgICBmdW5jdGlvbiBQcm94eUNsYXNzV2l0aFNldmljaWVzKCkgewogICAgICAgIHZhciBfdGhpczsKCiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3h5Q2xhc3NXaXRoU2V2aWNpZXMpOwoKICAgICAgICB2YXIgc2VydmljZXMgPSBnZXREZXBlbmRlbmNpZXNJbnRhbmNlcyhzZXJ2aWNlc0lkIHx8IFtdKTsKCiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHBhcmFtcyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgICAgIHBhcmFtc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgICAgICB9CgogICAgICAgIGNvbnNvbGUubG9nKCdbU2VydmljZSBEZWNvcmF0ZV0gJywgcGFyYW1zKTsKICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsLmFwcGx5KF9zdXBlciwgW3RoaXNdLmNvbmNhdChwYXJhbXMsIFtzZXJ2aWNlc10pKTsKICAgICAgICBfdGhpcy5zZXJ2aWNlcyA9IHZvaWQgMDsKICAgICAgICBfdGhpcy5zZXJ2aWNlcyA9IHNlcnZpY2VzOwogICAgICAgIGNvbnNvbGUubG9nKCdbU2VydmljZSBEZWNvcmF0ZV06dGhpcyAnLCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgICB9CgogICAgICBfY3JlYXRlQ2xhc3MoUHJveHlDbGFzc1dpdGhTZXZpY2llcywgW3sKICAgICAgICBrZXk6ICJfX3JlYWN0c3RhbmRpbl9fcmVnZW5lcmF0ZUJ5RXZhbCIsCiAgICAgICAgLy8gQHRzLWlnbm9yZQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfX3JlYWN0c3RhbmRpbl9fcmVnZW5lcmF0ZUJ5RXZhbChrZXksIGNvZGUpIHsKICAgICAgICAgIC8vIEB0cy1pZ25vcmUKICAgICAgICAgIHRoaXNba2V5XSA9IGV2YWwoY29kZSk7CiAgICAgICAgfQogICAgICB9XSk7CgogICAgICByZXR1cm4gUHJveHlDbGFzc1dpdGhTZXZpY2llczsKICAgIH0oY290cik7CgogICAgUHJveHlDbGFzc1dpdGhTZXZpY2llcy5jb3RyTmFtZSA9IGNvdHIubmFtZTsKICAgIHJldHVybiBQcm94eUNsYXNzV2l0aFNldmljaWVzOwogIH07Cn0KCmlmICh0eXBlb2YgU2VydmljZSAhPT0gJ3VuZGVmaW5lZCcgJiYgU2VydmljZSAmJiBTZXJ2aWNlID09PSBPYmplY3QoU2VydmljZSkgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShTZXJ2aWNlKSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTZXJ2aWNlLCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAiU2VydmljZSIsCiAgICAgIGZpbGVuYW1lOiAic3JjL2RpL2RlY29yYXRlL3NlcnZpY2UudHMiCiAgICB9CiAgfSk7Cn0KCmV4cG9ydCB2YXIgSW5qZWN0ID0gZnVuY3Rpb24gSW5qZWN0KHNlcnZpY2VzSWQpIHsKICByZXR1cm4gZnVuY3Rpb24gKGNvbXBvbmVudCkgewogICAgdmFyIHNlcnZpY2VzID0gZ2V0RGVwZW5kZW5jaWVzSW50YW5jZXMoc2VydmljZXNJZCB8fCBbXSk7CiAgICBjb21wb25lbnQuc2VydmljZXMgPSBzZXJ2aWNlczsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgcGFyYW1zID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7CiAgICAgICAgcGFyYW1zW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07CiAgICAgIH0KCiAgICAgIHJldHVybiBjb21wb25lbnQuYXBwbHkodm9pZCAwLCBwYXJhbXMuY29uY2F0KFtzZXJ2aWNlc10pKTsKICAgIH07CiAgfTsKfTsKCmlmICh0eXBlb2YgSW5qZWN0ICE9PSAndW5kZWZpbmVkJyAmJiBJbmplY3QgJiYgSW5qZWN0ID09PSBPYmplY3QoSW5qZWN0KSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKEluamVjdCkpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSW5qZWN0LCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAiSW5qZWN0IiwKICAgICAgZmlsZW5hbWU6ICJzcmMvZGkvZGVjb3JhdGUvc2VydmljZS50cyIKICAgIH0KICB9KTsKfQoKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgcmVhY3RIb3RMb2FkZXIgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZGVmYXVsdCA6IHVuZGVmaW5lZDsKCiAgaWYgKCFyZWFjdEhvdExvYWRlcikgewogICAgcmV0dXJuOwogIH0KCiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoU2VydmljZSwgIlNlcnZpY2UiLCAiL1VzZXJzL2ExODAxMTQwNTcwNC9EZXNrdG9wL2NvZGUvZGktc2VydmljZS9zcmMvZGkvZGVjb3JhdGUvc2VydmljZS50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKEluamVjdCwgIkluamVjdCIsICIvVXNlcnMvYTE4MDExNDA1NzA0L0Rlc2t0b3AvY29kZS9kaS1zZXJ2aWNlL3NyYy9kaS9kZWNvcmF0ZS9zZXJ2aWNlLnRzIik7Cn0pKCk7Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciBsZWF2ZU1vZHVsZSA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5sZWF2ZU1vZHVsZSA6IHVuZGVmaW5lZDsKICBsZWF2ZU1vZHVsZSAmJiBsZWF2ZU1vZHVsZShtb2R1bGUpOwp9KSgpOw=="},{"version":3,"sources":["/Users/a18011405704/Desktop/code/di-service/src/di/decorate/service.ts"],"names":["getDependenciesIntances","Service","servicesId","cotr","ProxyClassWithSevicies","services","params","console","log","cotrName","name","Inject","component"],"mappings":";;;;;;;;;;;;;;;AAAA,SAASA,uBAAT,QAAwC,UAAxC;AAGA;AACA,OAAO,SAASC,OAAT,CAAiBC,UAAjB,EAAwC;AAC7C,SAAO,UAAyCC,IAAzC,EAAqD;AAAA,QACpDC,sBADoD;AAAA;;AAAA;;AAGxD,wCAA8B;AAAA;;AAAA;;AAC5B,YAAMC,QAAQ,GAAGL,uBAAuB,CAACE,UAAU,IAAI,EAAf,CAAxC;;AAD4B,0CAAfI,MAAe;AAAfA,UAAAA,MAAe;AAAA;;AAE5BC,QAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCF,MAAnC;AAEA,wDAASA,MAAT,GAAiBD,QAAjB;AAJ4B,cADvBA,QACuB;AAK5B,cAAKA,QAAL,GAAgBA,QAAhB;AAEAE,QAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AAP4B;AAQ7B;;AAXuD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,MACrBL,IADqB;;AAczDC,IAAAA,sBAAD,CAAiCK,QAAjC,GAA4CN,IAAI,CAACO,IAAjD;AAEA,WAAUN,sBAAV;AACD,GAjBD;AAkBD;;;;;;;;;;;;;AAGD,OAAO,IAAMO,MAAM,GAAG,SAATA,MAAS,CAACT,UAAD;AAAA,SAA2B,UAACU,SAAD,EAAsD;AACrG,QAAMP,QAAQ,GAAGL,uBAAuB,CAACE,UAAU,IAAI,EAAf,CAAxC;AACCU,IAAAA,SAAD,CAAoBP,QAApB,GAA+BA,QAA/B;AAEA,WAAO,YAAsB;AAAA,yCAAlBC,MAAkB;AAAlBA,QAAAA,MAAkB;AAAA;;AAC3B,aAAOM,SAAS,MAAT,SAAaN,MAAb,SAAqBD,QAArB,GAAP;AACD,KAFD;AAGD,GAPqB;AAAA,CAAf;;;;;;;;;;;;;;;;;;;;;;0BAtBSJ,O;0BAsBHU,M","sourcesContent":["import { getDependenciesIntances } from '../index';\nimport { Dict } from '../index';\n\n// 问题：react类里的构造器参数中的props和类里其他地方的this.props是不是一样的，如果不一样，那为什么不一样？？？\nexport function Service(servicesId?: string[]) {\n  return <T extends { new (...args: any[]): {} }>(cotr: T) => {\n    class ProxyClassWithSevicies extends cotr {\n      public services: {};\n      constructor(...params: any[]) {\n        const services = getDependenciesIntances(servicesId || []);\n        console.log('[Service Decorate] ', params);\n\n        super(...params, services);\n        this.services = services;\n\n        console.log('[Service Decorate]:this ', this);\n      }\n    }\n\n    (ProxyClassWithSevicies as Dict).cotrName = cotr.name;\n\n    return <T>ProxyClassWithSevicies;\n  };\n}\n\n\nexport const Inject = (servicesId?: string[]) => (component: (...params: any[]) => React.ReactNode) => {\n  const services = getDependenciesIntances(servicesId || []);\n  (component as Dict).services = services;\n\n  return (...params: any[]) => {\n    return component(...params, services) as JSX.Element;\n  }\n}\n"]}]}